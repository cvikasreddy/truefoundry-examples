env:
  TFY_API_KEY: <paste api key>
name: churn-prediction-train
type: job
image:
  type: build
  build_spec:
    type: tfy-python-buildpack
    command: >-
      python main.py --n_neighbors {{n_neighbors}} --weights {{weights}}
      --algorithm {{algorithm}} --power {{power}} --dataset_path
      {{dataset_path}}
    python_version: '3.9'
    build_context_path: ./
  build_source:
    type: local
mounts:
  - type: volume
    mount_path: /tmp/data
    volume_fqn: tfy-volume://demo-euwe1-production:demos:churn-pred
params:
  - name: n_neighbors
    default: '5'
    description: Number of neighbors to use by default
  - name: weights
    default: uniform
    description: 'Weight function used in prediction.  Possible values: uniform, distance'
  - name: algorithm
    default: auto
    description: >-
      Algorithm used to compute the nearest neighbors: possible values: 'auto',
      'ball_tree', 'kd_tree', 'brute'
  - name: power
    default: '2'
    description: >-
      Power parameter for the Minkowski metric. When p = 1, this is
      manhattan_dist, and euclidean_dist p = 2
  - name: dataset_path
    default: /tmp/data/Churn_Modelling.csv
    description: Path to dataset
retries: 0
trigger:
  type: manual
resources:
  cpu_limit: 1
  cpu_request: 1
  memory_limit: 2000
  memory_request: 2000
  ephemeral_storage_limit: 2000
  ephemeral_storage_request: 1000